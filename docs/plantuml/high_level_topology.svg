<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="915px" preserveAspectRatio="none" style="width:888px;height:915px;" version="1.1" viewBox="0 0 888 915" width="888px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="332.5" y="16.708">High level topology</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="140" x="365" y="37.6611">(Kafka Stream)</text><!--MD5=[6488079820aeb324570151f4bbdc2dca]
cluster Station status topology--><rect fill="#FFFFFF" height="601" style="stroke: #000000; stroke-width: 1.5;" width="455" x="422" y="48.9063"/><path d="M629,48.9063 L629,58.2031 L619,68.2031 L422,68.2031 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="197" x="425" y="62.9014">Station status topology</text><!--MD5=[8be2382164a18ca2ed43e492e30c65ff]
cluster Nearby traffic topology--><rect fill="#FFFFFF" height="856" style="stroke: #000000; stroke-width: 1.5;" width="391" x="7" y="48.9063"/><path d="M208,48.9063 L208,58.2031 L198,68.2031 L7,68.2031 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="10" y="62.9014">Nearby traffic topology</text><!--MD5=[d1148e26bc769c05cd12af7143d7e113]
entity stationAvailabilityClient--><rect fill="#FF7F50" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="193" x="438.5" y="83.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="493.5" y="106.9014">«producer»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="448.5" y="123.1982">stationAvailabilityClient</text><!--MD5=[5d3aefac5a38ef6bf20cf283a9bd6866]
entity stationAvailabilities--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="162" x="442" y="197.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="496.5" y="220.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="142" x="452" y="237.1982">stationAvailabilities</text><!--MD5=[5a4ea3b7a5127cf9394d1d1b6348545f]
entity stationUpdates--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="130" x="454" y="327.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="492.5" y="350.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="110" x="464" y="367.1982">stationUpdates</text><!--MD5=[024ee7ce38d555eed7c30878f4f92ef8]
entity hourlyStationStats--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="155" x="438.5" y="462.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="489.5" y="485.4014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="135" x="448.5" y="501.6982">hourlyStationStats</text><!--MD5=[2a436f2442a7fdfad9fe8adda98188e5]
entity stationStatus--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="117" x="724.5" y="580.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="756.5" y="603.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="97" x="734.5" y="620.1982">stationStatus</text><!--MD5=[2c5d1e5187b13ce3ce5fa5d47e0aec5d]
entity bikesLocked--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="111" x="460.5" y="580.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="489.5" y="603.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="470.5" y="620.1982">bikesLocked</text><!--MD5=[1f2111737cb25c69fa86958715e3ab1c]
entity station_hourly_statistics--><path d="M628.5,467.9063 C628.5,457.9063 726,457.9063 726,457.9063 C726,457.9063 823.5,457.9063 823.5,467.9063 L823.5,509.5 C823.5,519.5 726,519.5 726,519.5 C726,519.5 628.5,519.5 628.5,509.5 L628.5,467.9063 " fill="#FF7F50" style="stroke: #FFFFFF; stroke-width: 1.5;"/><path d="M628.5,467.9063 C628.5,477.9063 726,477.9063 726,477.9063 C726,477.9063 823.5,477.9063 823.5,467.9063 " fill="none" style="stroke: #FFFFFF; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="684" y="494.9014">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="175" x="638.5" y="511.1982">station_hourly_statistics</text><!--MD5=[b8e7e0fa629bdb31f3de8051aa8355bf]
entity bikeCountsClient--><rect fill="#FF7F50" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="145" x="45.5" y="83.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="83" x="76.5" y="106.9014">«producer»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="125" x="55.5" y="123.1982">bikeCountsClient</text><!--MD5=[e270446d7fda8563d625c794c30413e5]
entity bikeCounts--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="102" x="67" y="197.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="91.5" y="220.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="82" x="77" y="237.1982">bikeCounts</text><!--MD5=[9bf077302fb3a6cd9af3f2bb81195a8a]
entity bikeCountUpdates--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="154" x="41" y="327.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="91.5" y="350.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="134" x="51" y="367.1982">bikeCountUpdates</text><!--MD5=[09411f753dbe862e953e1c659afc9000]
entity countUpdatesProjected--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="190" x="23" y="462.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="91.5" y="485.4014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="170" x="33" y="501.6982">countUpdatesProjected</text><!--MD5=[00e0ec71b9325177d58a29b241246792]
entity zoneToStations--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="133" x="248.5" y="462.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="54" x="288" y="485.4014">«table»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="113" x="258.5" y="501.6982">zoneToStations</text><!--MD5=[92d3cab08da08933c7f099da37981f84]
entity stationNearbyCounts--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="172" x="92" y="580.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="151.5" y="603.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="152" x="102" y="620.1982">stationNearbyCounts</text><!--MD5=[95fd9ce9154cc37b8486b2409fb24212]
entity hourlyStationNearbyTraffic--><rect fill="#DCDCDC" height="52.5938" style="stroke: #FFFFFF; stroke-width: 1.5;" width="215" x="70.5" y="712.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="53" x="151.5" y="735.9014">«topic»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="195" x="80.5" y="752.1982">hourlyStationNearbyTraffic</text><!--MD5=[124d060446249a4fd6f30097546d7886]
entity station_daily_nearby_traffic--><path d="M68,836.9063 C68,826.9063 178,826.9063 178,826.9063 C178,826.9063 288,826.9063 288,836.9063 L288,878.5 C288,888.5 178,888.5 178,888.5 C178,888.5 68,888.5 68,878.5 L68,836.9063 " fill="#FF7F50" style="stroke: #FFFFFF; stroke-width: 1.5;"/><path d="M68,836.9063 C68,846.9063 178,846.9063 178,846.9063 C178,846.9063 288,846.9063 288,836.9063 " fill="none" style="stroke: #FFFFFF; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="136" y="863.9014">«database»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="200" x="78" y="880.1982">station_daily_nearby_traffic</text><!--MD5=[75490d6191340c74c8d49034062afe57]
link stationAvailabilityClient to stationAvailabilities--><path d="M532.247,137.1013 C530.479,153.6063 528.172,175.1373 526.305,192.5643 " fill="none" id="stationAvailabilityClient-to-stationAvailabilities" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="525.74,197.8312,530.6764,189.3088,526.2729,192.8597,522.7219,188.4562,525.74,197.8312" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[957c203bdf5e2e668136ac123e4ffce6]
link stationAvailabilities to stationUpdates--><path d="M522.2,251.0013 C521.554,271.6693 520.643,300.8162 519.959,322.7323 " fill="none" id="stationAvailabilities-to-stationUpdates" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="519.798,327.8552,524.0764,318.9842,519.9537,322.8577,516.0803,318.735,519.798,327.8552" style="stroke: #00BFFF; stroke-width: 1.0;"/><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="523" y="293.9731">deduplicated</text><!--MD5=[6d9e0b5f0a2c938bc7e6fc8f98669f57]
link stationUpdates to hourlyStationStats--><path d="M518.422,380.9533 C517.931,402.6273 517.225,433.7883 516.702,456.8893 " fill="none" id="stationUpdates-to-hourlyStationStats" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="516.587,461.9853,520.7891,453.0778,516.6999,456.9865,512.7912,452.8973,516.587,461.9853" style="stroke: #00BFFF; stroke-width: 1.0;"/><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="519" y="423.9731">windowed</text><!--MD5=[2ddc62395fe4c70a5dc81e58c0a1bf96]
link hourlyStationStats to bikesLocked--><path d="M516,515.4723 C516,533.2273 516,556.9723 516,575.7452 " fill="none" id="hourlyStationStats-to-bikesLocked" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="516,580.8992,520,571.8992,516,575.8992,512,571.8992,516,580.8992" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[d92ec79c179565965658fa45c06bf08d]
link hourlyStationStats to station_hourly_statistics--><path d="M593.52,488.9063 C603.435,488.9063 613.35,488.9063 623.266,488.9063 " fill="none" id="hourlyStationStats-to-station_hourly_statistics" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="628.451,488.9063,619.451,484.9063,623.451,488.9063,619.451,492.9063,628.451,488.9063" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[6b6b122bee130e2732e393fff8e41b00]
link stationUpdates to stationStatus--><path d="M584.033,366.8303 C668.96,383.2252 810.443,416.1123 841,457.9063 C867.733,494.4713 836.585,544.9733 810.633,576.6503 " fill="none" id="stationUpdates-to-stationStatus" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="807.175,580.8003,816.0105,576.4489,810.3768,576.9598,809.8659,571.3261,807.175,580.8003" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[7085279c076eb2e44dbd612810135458]
link station_hourly_statistics to stationStatus--><path d="M740.679,519.9083 C749.121,537.1623 759.698,558.7813 768.167,576.0883 " fill="none" id="station_hourly_statistics-to-stationStatus" style="stroke: #00BFFF; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#00BFFF" points="770.496,580.8493,770.1343,571.007,768.2989,576.3579,762.9481,574.5224,770.496,580.8493" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[a3c1146412dcb1c0d47cc8909219651d]
link bikeCountsClient to bikeCounts--><path d="M118,137.1013 C118,153.6063 118,175.1373 118,192.5643 " fill="none" id="bikeCountsClient-to-bikeCounts" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="118,197.8312,122,188.8312,118,192.8312,114,188.8312,118,197.8312" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[bb6d86992381c481e65dc224adbd8dde]
link bikeCounts to bikeCountUpdates--><path d="M118,251.0013 C118,271.6693 118,300.8162 118,322.7323 " fill="none" id="bikeCounts-to-bikeCountUpdates" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="118,327.8552,122,318.8552,118,322.8552,114,318.8552,118,327.8552" style="stroke: #00BFFF; stroke-width: 1.0;"/><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="82" x="119" y="293.9731">deduplicated</text><!--MD5=[c77ac0b1af4ece885b58f2d90d7a54c1]
link stationUpdates to zoneToStations--><path d="M479.667,380.9533 C445.065,403.4272 394.755,436.1043 358.864,459.4163 " fill="none" id="stationUpdates-to-zoneToStations" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="354.56,462.2113,364.2866,460.6642,358.7534,459.4881,359.9295,453.9548,354.56,462.2113" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[9ccee2c2f86fa38abd24581f69a1553a]
link bikeCountUpdates to countUpdatesProjected--><path d="M118,380.9533 C118,402.6273 118,433.7883 118,456.8893 " fill="none" id="bikeCountUpdates-to-countUpdatesProjected" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="118,461.9853,122,452.9853,118,456.9853,114,452.9853,118,461.9853" style="stroke: #00BFFF; stroke-width: 1.0;"/><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="119" y="423.9731">projected on nearby zones</text><!--MD5=[1ef7fd1ba20461858b890417e2cab85e]
link zoneToStations to stationNearbyCounts--><path d="M284.935,515.4723 C263.342,533.8343 234.215,558.6033 211.813,577.6533 " fill="none" id="zoneToStations-to-stationNearbyCounts" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="207.995,580.8992,217.4419,578.1143,211.8034,577.6594,212.2582,572.0209,207.995,580.8992" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[83aaf24c68e22462a1d64689786d2718]
link countUpdatesProjected to stationNearbyCounts--><path d="M131.167,515.4723 C140.39,533.3793 152.75,557.3783 162.456,576.2253 " fill="none" id="countUpdatesProjected-to-stationNearbyCounts" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="164.863,580.8992,164.3002,571.0665,162.5745,576.4537,157.1873,574.7281,164.863,580.8992" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[0d1b4c6f3627dec67d310ba07d66ba06]
link stationNearbyCounts to hourlyStationNearbyTraffic--><path d="M178,634.0903 C178,655.1893 178,685.1423 178,707.5423 " fill="none" id="stationNearbyCounts-to-hourlyStationNearbyTraffic" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="178,712.7763,182,703.7763,178,707.7763,174,703.7763,178,712.7763" style="stroke: #00BFFF; stroke-width: 1.0;"/><text fill="#FF7F50" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="179" y="678.9731">windowed</text><!--MD5=[ef4d8d87eefd74aab48c547ad14278e2]
link hourlyStationNearbyTraffic to station_daily_nearby_traffic--><path d="M178,765.9723 C178,782.2403 178,803.5363 178,821.4299 " fill="none" id="hourlyStationNearbyTraffic-to-station_daily_nearby_traffic" style="stroke: #00BFFF; stroke-width: 1.0;"/><polygon fill="#00BFFF" points="178,826.8644,182,817.8644,178,821.8644,174,817.8644,178,826.8644" style="stroke: #00BFFF; stroke-width: 1.0;"/><!--MD5=[b7b47e39d76c9cd390d0d9a21a52bfdb]
@startuml
title
<b>High level topology</b>
(Kafka Stream)
end title


frame "Station status topology"{
   rectangle stationAvailabilityClient <<producer>>
   rectangle stationAvailabilities <<topic>>
   rectangle stationUpdates <<topic>>
   rectangle hourlyStationStats<<topic>>
   rectangle stationStatus <<topic>>
   rectangle bikesLocked <<topic>>
   database station_hourly_statistics <<database>>
}

stationAvailabilityClient - -> stationAvailabilities 
stationAvailabilities - -> stationUpdates : deduplicated
stationUpdates - -> hourlyStationStats : windowed
hourlyStationStats - -> bikesLocked
hourlyStationStats -> station_hourly_statistics
stationUpdates - -> stationStatus
station_hourly_statistics ..> stationStatus

frame "Nearby traffic topology"{
   rectangle bikeCountsClient <<producer>>
   rectangle bikeCounts <<topic>>
   rectangle bikeCountUpdates <<topic>>
   rectangle countUpdatesProjected<<topic>>
   rectangle zoneToStations<<table>>
   rectangle stationNearbyCounts <<topic>>
   rectangle hourlyStationNearbyTraffic <<topic>>
   database station_daily_nearby_traffic <<database>>
}


bikeCountsClient - -> bikeCounts 
bikeCounts - -> bikeCountUpdates : deduplicated
stationUpdates - -> zoneToStations
bikeCountUpdates - -> countUpdatesProjected: projected on nearby zones
zoneToStations- -> stationNearbyCounts 
countUpdatesProjected - -> stationNearbyCounts 
stationNearbyCounts - -> hourlyStationNearbyTraffic : windowed
hourlyStationNearbyTraffic - -> station_daily_nearby_traffic

skinparam rectangle{
    backgroundColor<<topic>> Gainsboro
    backgroundColor<<table>> Gainsboro
    backgroundColor<<producer>> Coral
    backgroundColor<<consumer>> Coral
    borderColor<<topic>> transparent
    borderColor<<table>> transparent
    borderColor<<producer>> transparent
    borderColor<<consumer>> transparent
}

skinparam database{ 
   backgroundColor<<database>> Coral
   borderColor transparent
}

skinparam{
   ArrowColor DeepSkyBlue
   ArrowFontColor Coral
   shadowing false
}
@enduml

PlantUML version 1.2020.17beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>