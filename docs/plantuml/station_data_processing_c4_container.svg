<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1101px" preserveAspectRatio="none" style="width:904px;height:1101px;" version="1.1" viewBox="0 0 904 1101" width="904px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="410" x="238" y="27.8467">Station Data Processing</text><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacingAndGlyphs" textLength="362" x="262" y="62.7686">(C4 Container diagram)</text><!--MD5=[84dda40acb3410cad7262261daba2aaf]
cluster c1--><rect fill="#FFFFFF" height="889" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="568" x="7" y="76.8438"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="180.5" y="93.6953">Station data processing</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="259" y="108.6074">[System]</text><!--MD5=[f637b4c150ddfe5a23ebefab20f72a7f]
entity producerApplication--><rect fill="#438DD5" height="165.7813" style="stroke: #3C7FC0; stroke-width: 1.5;" width="220" x="314" y="153.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="328.5" y="178.1953">Producer Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="127" x="360.5" y="193.1074">[Java, Unirest, Kafka]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="426" y="208.9326"/><image height="48" width="48" x="400" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="212.2344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="333" y="273.2295">Fetch stations data from</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="324" y="289.5264">Paris' API and push them to</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="403.5" y="305.8232">Kafka</text><!--MD5=[ce6a85ca25b6f16f50738b34c4d69d9c]
entity streamingApplication--><rect fill="#438DD5" height="217" style="stroke: #3C7FC0; stroke-width: 1.5;" width="220" x="41" y="127.8438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="101" y="152.6953">Streaming</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="100" y="171.3203">Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="143" x="79.5" y="186.2324">[Java, Kafka Streaming]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="153" y="202.0576"/><image height="48" width="48" x="127" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="205.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="197" x="52.5" y="266.3545">Combine and process Paris'</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="77" y="282.6514">data. Detect locked</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="80" y="298.9482">stations using their</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="51" y="315.2451">expected activity based on</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="100" y="331.542">past statistics</text><!--MD5=[0b77ce7009a41ff29b6146aac87f819c]
entity statisticsDb--><path d="M23,521.8438 C23,511.8438 126,511.8438 126,511.8438 C126,511.8438 229,511.8438 229,521.8438 L229,676.625 C229,686.625 126,686.625 126,686.625 C126,686.625 23,686.625 23,676.625 L23,521.8438 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M23,521.8438 C23,531.8438 126,531.8438 126,531.8438 C126,531.8438 229,531.8438 229,521.8438 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="35" y="550.6953">Statistics Database</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="86.5" y="565.6074">[PostgreSQL]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="128" y="581.4326"/><image height="48" width="48" x="102" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAADA0lEQVR4Xu2XT2oVQRDGc7c+QC7gAbyAB/AAunIl7ly4cJmdK3EnuHEhEkEISCAgKEZQBGH88T7SVOpP9zwdnoIpPob3eqqrvq6qru45avfe/FM4ikN/FzeEZvifCB0/eHv78fu7Jx/uPzu/8/Ts1qN3USdiQghzJ68/nV58E16dfX3y8iODOJMCnlA4//xj2cnl95/owAAFXvVxCX+Z3uemKAlhDuvWnBW8ogMV/8IIvtF5+OLCjWMW49GjkBMi1M6KFSyyyuenX/yLIAQVTQLmXywLg9FvSQhD3oARbKU+UoE91ZPqs+zoOiE0Dg/CogfZjMLyMBsjqpzOCcWsW8EKFeBHZ6JadoOUYPSeEGKym2lF28qPrhAC7yyvjdDYX5tVWCWYdUEiFdH7foQoHRR4oqN2x3PMD01iQ12r/djiW1vUgxpSeWIaB6iJVqtjhg7KqNG3NNcSiq5zQjRiY/OapPtFh4Md6QIbqOi3ottf0bWj65wQq+/TnKjRuUElxQ1Kmgmem5tusZxQM+twomWtGZSwth4h4mp5V6dHTqhbceLC3qVdL44uNpuWkOykyAlVdV0FoxWEdAbrlU1Z2oGEnFBVEzhIK6x7jYK++qFdTLrhhZxQKxyk9ZtWepfeD3u6FbYKJaF4Fi4FIQIQB60oSJ1QVc5CSShtLbG5LSYplRASNSQ9oy+LklCVBYJhS15uzPtcdHSwyOnNuiTUiqwpSD0kKy9rmjVOljAiVN17dH5pxTyrHuGEnhRdRIwIAffZsGQtX+mImlZEfZqvNiXkgkQSU4Vp4trV2sgdRvQ5dZx9D00INXOMqA4sKHDtOF2MLAMr2vC6rgCoDEI1J9R2Jcyy+oK0z3WMX159ZA0IxZUMsIpQBJzgQYQ6ywGhae+x+E1CEQNCcR8McAhC6WW+wiEIrexAwiEIDS4bEZsRGnwaROUBNiNU3UAGt9UUmxFq2dV22XPPt20JpbeDvQqobUvIHbH8XnPfcNiSUNtxorrB4LQaY2NCf44bQjPcEJrhF3jtvoec/65YAAAAAElFTkSuQmCC" y="584.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="43" y="645.7295">Store the hourly usage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="33" y="662.0264">statistics and daily traffic</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="37" y="678.3232">statistics of each station</text><!--MD5=[a8d0812f293a6a5b0e62bae90d7913fb]
entity kafkaCluster--><path d="M264,513.8438 C264,503.8438 373,503.8438 373,503.8438 C373,503.8438 482,503.8438 482,513.8438 L482,684.9219 C482,694.9219 373,694.9219 373,694.9219 C373,694.9219 264,694.9219 264,684.9219 L264,513.8438 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M264,513.8438 C264,523.8438 373,523.8438 373,523.8438 C373,523.8438 482,523.8438 482,513.8438 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="311" y="542.6953">Kafka Cluster</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="153" x="296.5" y="557.6074">[Kafka, Schema Registry]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="375" y="573.4326"/><image height="48" width="48" x="349" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC0ElEQVR4Xu2YQYrVQBCG5259AC/gAbyAB/AAunIl7ly4cDk7V+JOcONCZARhQAYGBEUFRRDiRwp+yurKS3XmvZknWPyE9zqd1Jfq6upOTtr9t0elk77pZvWPA907/Xh2+WOa7eLLr6evPvV9rqgBoNM3nw3FG3y3Hr7rO29WFejRy0tBEBvFCXt9/r3vv1lVILl/8PzCWu48+fDt529rvPvsvL9km0pA+EuDAZy17zGZSkBLjgVKevVXbVMJ6OgihJQu9Ryikc4ch6ZhFYgKZL4xOISCvTj7Gjr7KWlWD2EVCHHT4Gaa61DolparqZxnA0BtHibiYQ6oRkQidPCBJOF4Bo5q4Wx/z6AxIHT78Xu7e5o3KpieVbnfh7PXnoHsFBbalXP9JUEHAcJ9aD8IEChKIDOGIKRFWgjIPGsk7frbBlWBlAe9WbUE16+401yxrBSJsjL5S0B+7qQWUFKrZHSrAFFn/X2JBw8NYlqWmFz091PdjJZivV4H8mVX64aJYdJw8IO/OkXeQEwx5Jim/5LWgfS4acx9bhVjsFvrQEwN85fWfs2gaaEQjGqfQPzuO4xqHcgvXv1Zn2HXNGQ+S0IhCeXAR4hTPAlpxzFMhd1aB2qu/k5zahMVFKq2GcRgaZRltPg5uEMlIG1hlyyFC8ZTVca0BNRmJh8nb7bTwJnHojOjRlQ4KmB7WzpMuOSOWiVwyd8wEIL2+aQNQjotggaATLp7mqpiDe0H2X6YdgPJcUgXa7wBIK0zPl20DFe+AowB+U0+weiZ/Hwk2yjufmdSWVsGgPq3rSn7HJN2m2pTrNWBQlH2JaB/UaSz75DGcklVIDnQ+40fnXRZJdvoUyzQUglIvsOWSKNTHI6KSkAar+BYoOnOZJtKQHJ8LJ9j/D5fL2J+Q115aS+qBNT+/vRBJvnqku61N6sK1Ba+s/R16IoaAGrH9uH8evQfaE1/AEAlGEQzMetqAAAAAElFTkSuQmCC" y="576.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="194" x="274" y="637.7295">Store the incoming station</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="284" y="654.0264">and traffic data, and the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="282.5" y="670.3232">processed station status</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="325" y="686.6201">and statistics</text><!--MD5=[9bfd0a87d2b9a6cda5f475705ea2bffd]
entity sinkApplication--><rect fill="#438DD5" height="165.7813" style="stroke: #3C7FC0; stroke-width: 1.5;" width="202" x="127" y="783.8438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="158.5" y="808.6953">SinkApplication</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="190" y="823.6074">[Java, Kafka]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="230" y="839.4326"/><image height="48" width="48" x="204" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="842.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="137" y="903.7295">Consume statistics topic</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="151" y="920.0264">and store data in the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="160" y="936.3232">statistics database</text><!--MD5=[b0576eac782cb758ab86e0657124dadc]
entity parisAPI--><rect fill="#999999" height="87.5156" style="stroke: #8A8A8A; stroke-width: 1.5;" width="198" x="695" y="192.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="705" y="217.1953">Paris OpenData API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="796" y="233.9639"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="720" y="250.2607">Expose stations and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="744.5" y="266.5576">counters data</text><!--MD5=[9c5b72b7ada8061a12d79de0d9737477]
link producerApplication to kafkaCluster--><path d="M412.363,319.7118 C404.994,371.8758 395.405,439.7497 387.537,495.4478 " fill="none" id="producerApplication-to-kafkaCluster" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="386.389,503.5738,390.4781,496.0718,384.537,495.2329,386.389,503.5738" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="405" y="421.9824">Push the stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="412.5" y="435.9512">and traffic data</text><!--MD5=[b456962fc3931798020d88f07273dc02]
link streamingApplication to kafkaCluster--><path d="M186.934,344.8448 C207.094,404.4748 228.995,467.8468 233,473.8438 C240.4,484.9228 249.015,495.6438 258.269,505.8378 " fill="none" id="streamingApplication-to-kafkaCluster" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="263.786,511.7778,260.5397,503.8745,256.1435,507.9578,263.786,511.7778" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="262" y="386.9824">Process the</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="246" y="400.9512">stations data to</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="242.5" y="414.9199">detect anomalies</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="234" y="428.8887">and the traffic data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="244.5" y="442.8574">to compute each</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="251.5" y="456.8262">station nearby</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="283" y="470.7949">traffic</text><!--MD5=[7bd216ec852f030baa0346f289e3cbff]
reverse link kafkaCluster to sinkApplication--><path d="M336.783,702.5888 C329.354,720.0638 321.017,737.7558 312,753.8438 C306.414,763.8088 300.049,773.8898 293.377,783.7088 " fill="none" id="kafkaCluster-backto-sinkApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="339.91,695.1178,334.0526,701.338,339.5869,703.6556,339.91,695.1178" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="328" y="736.9824">Consume statistics</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="377" y="750.9512">topics</text><!--MD5=[397004573508e02ddf2c4e80a3f23f62]
reverse link statisticsDb to sinkApplication--><path d="M162.218,694.6188 C173.362,723.6248 185.536,755.3128 196.348,783.4558 " fill="none" id="statisticsDb-backto-sinkApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="159.257,686.9108,159.3254,695.4545,164.9263,693.3028,159.257,686.9108" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="185" y="736.9824">Write statistics</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="227" y="750.9512">data</text><!--MD5=[15f73685de288abf99a87ef780eff8de]
link streamingApplication to statisticsDb--><path d="M67.3306,344.8978 C62.4195,354.6658 58.1886,364.7068 55,374.8438 C41.7975,416.8167 43.725,431.3128 55,473.8438 C57.6929,484.0018 61.4297,494.1968 65.7927,504.1398 " fill="none" id="streamingApplication-to-statisticsDb" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="69.2443,511.6898,68.647,503.1667,63.19,505.661,69.2443,511.6898" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="62.5" y="407.9824">Fetch the usage</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="76.5" y="421.9512">statistics to</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="56" y="435.9199">compute station's</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="60" y="449.8887">expected activity</text><!--MD5=[4f70df459808d8bd90864d99d5807d40]
link producerApplication to parisAPI--><path d="M534.01,236.3438 C582.239,236.3438 638.651,236.3438 686.58,236.3438 " fill="none" id="producerApplication-to-parisAPI" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="694.81,236.3438,686.81,233.3438,686.81,239.3438,694.81,236.3438" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="552.5" y="202.4824">Get the stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="555.5" y="216.4512">and traffic data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="594" y="230.4199">[REST]</text><rect fill="#FFFFFF" height="111.7813" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="136" x="741" y="978.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="747" y="998.8389">Legend</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="808" y="998.8389"/><rect fill="#08427B" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="747" y="1002.1406"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="751" y="1015.1357">person</text><rect fill="#1168BD" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="747" y="1018.4375"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="751" y="1031.4326">system</text><rect fill="#438DD5" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="747" y="1034.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="751" y="1047.7295">container</text><rect fill="#686868" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="747" y="1051.0313"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="751" y="1064.0264">external person</text><rect fill="#999999" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="747" y="1067.3281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="751" y="1080.3232">external system</text><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="985.8438" y2="985.8438"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1002.1406" y2="1002.1406"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1018.4375" y2="1018.4375"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1034.7344" y2="1034.7344"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1051.0313" y2="1051.0313"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1067.3281" y2="1067.3281"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="871" y1="1083.625" y2="1083.625"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="747" x2="747" y1="985.8438" y2="1083.625"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="871" x2="871" y1="985.8438" y2="1083.625"/><!--MD5=[406d5f9a7c23258213a5d9ca0c2a407a]
@startuml
!include https://raw.githubusercontent.com/adrianvlupu/C4-PlantUML/latest/C4_Container.puml
!define SPRITESURL https://raw.githubusercontent.com/rabelenda/cicon-plantuml-sprites/v1.0/sprites
!includeurl SPRITESURL/kafka.puml
!includeurl SPRITESURL/java.puml
!includeurl SPRITESURL/postgresql.puml

skinparam TitleFontSize 30
LAYOUT_WITH_LEGEND()

title
<b>Station Data Processing</b>
(C4 Container diagram)
end title
  
System_Boundary(c1, "Station data processing") {
    Container(producerApplication, "Producer Application", "Java, Unirest, Kafka", "<$java>\n Fetch stations data from Paris' API and push them to Kafka")
    Container(streamingApplication, "Streaming Application", "Java, Kafka Streaming", "<$java>\n Combine and process Paris' data. Detect locked stations using their expected activity based on past statistics") 
    ContainerDb(statisticsDb, "Statistics Database", "PostgreSQL", "<$postgresql>\n Store the hourly usage statistics and daily traffic statistics of each station")
    ContainerDb(kafkaCluster, "Kafka Cluster", "Kafka, Schema Registry", "<$kafka>\n Store the incoming station and traffic data, and the processed station status and statistics")
    Container(sinkApplication, "SinkApplication", "Java, Kafka", "<$java>\n Consume statistics topic and store data in the statistics database") 
}

System_Ext(parisAPI, "Paris OpenData API", "Expose stations and counters data")

Rel(producerApplication, kafkaCluster, "Push the stations and traffic data")
Rel(streamingApplication, kafkaCluster, "Process the stations data to detect anomalies and the traffic data to compute each station nearby traffic")
Rel_Up(sinkApplication, kafkaCluster, "Consume statistics topics")
Rel_Up(sinkApplication, statisticsDb, "Write statistics data")
Rel(streamingApplication, statisticsDb, "Fetch the usage statistics to compute station's expected activity")
Rel_R(producerApplication, parisAPI, "Get the stations and traffic data", "REST")
@enduml

@startuml





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam LegendBorderColor transparent
skinparam LegendBackgroundColor transparent
skinparam LegendFontColor #FFFFFF

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}





























skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

sprite $person [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
0000000000000000000049BCCA7200000000000000000000
0000000000000000006EFFFFFFFFB3000000000000000000
00000000000000001CFFFFFFFFFFFF700000000000000000
0000000000000001EFFFFFFFFFFFFFF80000000000000000
000000000000000CFFFFFFFFFFFFFFFF6000000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
00000000000001FFFFFFFFFFFFFFFFFFF900000000000000
00000000000006FFFFFFFFFFFFFFFFFFFF00000000000000
0000000000000BFFFFFFFFFFFFFFFFFFFF40000000000000
0000000000000EFFFFFFFFFFFFFFFFFFFF70000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000DFFFFFFFFFFFFFFFFFFFF60000000000000
0000000000000AFFFFFFFFFFFFFFFFFFFF40000000000000
00000000000006FFFFFFFFFFFFFFFFFFFE00000000000000
00000000000000EFFFFFFFFFFFFFFFFFF800000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
000000000000000BFFFFFFFFFFFFFFFF5000000000000000
0000000000000001DFFFFFFFFFFFFFF70000000000000000
00000000000000000BFFFFFFFFFFFF500000000000000000
0000000000000000005DFFFFFFFFA1000000000000000000
0000000000000000000037ABB96100000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000025788300000000005886410000000000000
000000000007DFFFFFFD9643347BFFFFFFFB400000000000
0000000004EFFFFFFFFFFFFFFFFFFFFFFFFFFB1000000000
000000007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFD200000000
00000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE10000000
0000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB0000000
000000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000000
000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD000000
000009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF200000
00000DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF600000
00000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF800000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF700000
000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE100000
0000008FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD3000000
000000014555555555555555555555555555555300000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}


















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}








sprite $kafka [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
0000000000000005CFFD8000000000000000000000000000
000000000000009FFFFFFC10000000000000000000000000
00000000000007FFFDCFFFB0000000000000000000000000
0000000000000FFF6003EFF4000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000006FF800004FF9000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000000EFF6003EFF4000000464100000000000000
00000000000005FFFEEFFFA000007FFFFF80000000000000
000000000000008FFFFFFC000009FFFFFFF9000000000000
0000000000000003AFFD7000005FFFB8BFFF500000000000
00000000000000002FF4000000CFF70006FFC00000000000
00000000000000002FF4000000FFF00000EFF00000000000
00000000000000002FF4000000FFE00000EFF00000000000
000000000000002AFFFFC50000EFF40003FFD00000000000
00000000000006FFFFFFFFB02CFFFF646EFF800000000000
0000000000005FFFFFFFFFFCFFFFFFFFFFFC000000000000
000000000001FFFFB658FFFFFF71BFFFFFB1000000000000
000000000007FFF600002EFFE20003898400000000000000
00000000000BFFC0000006FFF10000000000000000000000
00000000000DFF90000003FFF40000000000000000000000
00000000000DFF90000003FFF30000000000000000000000
00000000000AFFD0000007FFF10000000000000000000000
000000000006FFF800005FFFF30005ACA600000000000000
000000000000EFFFC77AFFFFFF83DFFFFFD2000000000000
0000000000004FFFFFFFFFFAFFFFFFFFFFFE100000000000
00000000000004EFFFFFFF701AFFFE525DFF800000000000
0000000000000018CFFE820000EFF30002FFD00000000000
00000000000000002FF6000000FFE00000EFF00000000000
00000000000000002FF6000000EFF10000FFF00000000000
00000000000000002FF6000000BFF80008FFB00000000000
0000000000000003AFFE6000004FFFC9CFFF400000000000
000000000000007FFFFFFC100007FFFFFFF8000000000000
00000000000005FFFFEFFFA000005EFFFE60000000000000
0000000000000EFF7004FFF3000000242000000000000000
0000000000004FFC00007FF8000000000000000000000000
0000000000005FF800004FF9000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000001FFF5002EFF5000000000000000000000000
00000000000008FFFCCFFFC0000000000000000000000000
000000000000009FFFFFFC10000000000000000000000000
0000000000000005CFFD8000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $java [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000800000000000000000000
000000000000000000000000002C00000000000000000000
000000000000000000000000009E00000000000000000000
00000000000000000000000005FC00000000000000000000
0000000000000000000000005FF600000000000000000000
000000000000000000000008FFD000000000000000000000
0000000000000000000001CFFF3016BC3000000000000000
000000000000000000003EFFF42BFF900000000000000000
00000000000000000004FFFF35FFF6000000000000000000
0000000000000000002FFFF22FFE20000000000000000000
0000000000000000009FFF309FF400000000000000000000
000000000000000000DFF800CFF000000000000000000000
000000000000000000CFF200CFF300000000000000000000
0000000000000000005FF2007FFA00000000000000000000
0000000000000000000EF6000EFF40000000000000000000
00000000000000000003EE0004FFA0000000000000000000
000000000000000000003E7000CFC0000000000000000000
0000000000000000000002C2009F80000000000000000000
00000000000000357841000400D900000698300000000000
0000000000008EFFA100000005400022127FF40000000000
000000000000FFFFFCA999999ABDFFC10008FB0000000000
0000000000003BFFFFFFFFFFFFEC84000006FB0000000000
00000000000000015756664420000000000AF80000000000
0000000000000008FC20000000146000002FF30000000000
000000000000000EFFFDB99ABDFFFB1003DF400000000000
00000000000000019EFFFFFFFFFD95005E91000000000000
000000000000000002835666420000004100000000000000
00000000000000004FF8422457BF90000000000000000000
00000000000246409FFFFFFFFFFFF5000000000000000000
0000000002CFFB8605BEFFFFFEB71000000C100000000000
000000000AFFC0000000122100000000008F600000000000
0000000008FFF92000000000000000004AFE300000000000
00000000007FFFFDA8644422234689CFFFA1004100000000
0000000000015ADFFFFFFFFFFFFFFFEB6100199000000000
000000000000000135688999887431000049FC1000000000
00000000000000036420000000000248BFFD600000000000
00000000000000000258ACCCCCDEFFFDB730000000000000
000000000000000000000012444442000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $postgresql [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000135642000000000000
000000000059CCCB8510049DFFEB614DFFFFD81000000000
000000004EFFFFFFFFB09FFFFFFFFF807FFFFFE400000000
00000003FFFFFFFFFE1AFFFFFFFFFFFC16FFFFFF60000000
0000000CFFFFFFFFF66FFFFFFFFFFFFFE26FFFFFF3000000
0000003FFFFFFFFFF1EFFFFFFFFFFFFFFC0AFFFFF8000000
0000007FFFFFFFFF84FFFFFFFFFFFFFFFF81FFFFF9000000
0000008FFFFFFFFF49FFFFFFFFFFFFFFFFF38FFFF8000000
0000009FFFFFFFFF0CFFFFFFFFFFFFFFFFF91FFFF7000000
0000009FFFFFFFFE0E9646CFFFFFFFFF93210EFFF3000000
0000007FFFFFFFFC0127960CFFFFFFF719BC0EFFF0000000
0000005FFFFFFFFC0AFFFF56FFFFFFF1BFFE0FFFD0000000
0000002FFFFFFFFC1FFFFF93FFFFFFF0CFFC1FFF90000000
0000000FFFFFFFFD0FFFFFD0FFFFFFF2BFFA3FFF40000000
0000000BFFFFFFFE0FFFFFF0EFFFFFF56FFA3FFE00000000
00000007FFFFFFFD0FFFFFF0EFFFFFFB0EFC1FF800000000
00000003FFFFFFFB2FFFFFF0EFFFFFFF28FD0FF300000000
00000000EFFFFFF93FFFFFC1FFFFFFFF91FE0FB000000000
00000000AFFFFFF93FFFFF83FFFFFFFFF28E0F4000000000
000000006FFFFFFC0EFFFF28FFFFFFFFFB1B1B0000000000
000000001FFFFFFF37FFFB1FFFFFFFFFFF21620000000000
000000000AFFFFFFC08FF66FFFFFFFFFFFC0400000000000
0000000004FFFFFFF601617FFFFFFFFFFFF5000000000000
0000000000DFFFFF90000021DFFFFFFFFF61200000000000
00000000004FFFFA000004F66FFFFFFFFF0DFCAB81000000
00000000000BFFC000003EF46FFFFFFFFE07998200000000
0000000000008A10028CFE406FFFFFFFFC00000000000000
0000000000000000002431006FFFFFFFFB00000000000000
0000000000000000000000006FFFFFFFF900000000000000
0000000000000000000000006FFFFFFFF700000000000000
0000000000000000000000006FFFFFFFF500000000000000
0000000000000000000000006FFFFFFFF300000000000000
0000000000000000000000005FFFFFFFF000000000000000
0000000000000000000000003FFFFFFFE000000000000000
0000000000000000000000000FFFFFFFB000000000000000
0000000000000000000000000AFFFFFF3000000000000000
00000000000000000000000001DFFFD40000000000000000
000000000000000000000000001552000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}

skinparam TitleFontSize 30
hide stereotype
legend right
|<color:#000000>**Legend**</color> |
|<#08427B> person |
|<#1168BD> system |
|<#438DD5> container |
|<#686868> external person |
|<#999999> external system |
endlegend

title
<b>Station Data Processing</b>
(C4 Container diagram)
end title
  
rectangle "==Station data processing\n<size:12>[System]</size>" <<boundary>> as c1 {
    rectangle "==Producer Application\n//<size:12>[Java, Unirest, Kafka]</size>//\n\n <$java>\n Fetch stations data from Paris' API and push them to Kafka" <<container>> as producerApplication
    rectangle "==Streaming Application\n//<size:12>[Java, Kafka Streaming]</size>//\n\n <$java>\n Combine and process Paris' data. Detect locked stations using their expected activity based on past statistics" <<container>> as streamingApplication 
    database "==Statistics Database\n//<size:12>[PostgreSQL]</size>//\n\n <$postgresql>\n Store the hourly usage statistics and daily traffic statistics of each station" <<container>> as statisticsDb
    database "==Kafka Cluster\n//<size:12>[Kafka, Schema Registry]</size>//\n\n <$kafka>\n Store the incoming station and traffic data, and the processed station status and statistics" <<container>> as kafkaCluster
    rectangle "==SinkApplication\n//<size:12>[Java, Kafka]</size>//\n\n <$java>\n Consume statistics topic and store data in the statistics database" <<container>> as sinkApplication 
}

rectangle "==Paris OpenData API\n\n Expose stations and counters data" <<external_system>> as parisAPI

producerApplication - ->> kafkaCluster : **Push the stations and traffic data**
streamingApplication - ->> kafkaCluster : **Process the stations data to detect anomalies and the traffic data to compute each station nearby traffic**
sinkApplication -UP->> kafkaCluster : **Consume statistics topics**
sinkApplication -UP->> statisticsDb : **Write statistics data**
streamingApplication - ->> statisticsDb : **Fetch the usage statistics to compute station's expected activity**
producerApplication -RIGHT->> parisAPI : **Get the stations and traffic data**\n//<size:12>[REST]</size>//
@enduml

PlantUML version 1.2020.17beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>