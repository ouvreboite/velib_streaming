<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1115px" preserveAspectRatio="none" style="width:1809px;height:1115px;" version="1.1" viewBox="0 0 1809 1115" width="1809px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="30" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="788" y="27.8467">Architecture</text><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacingAndGlyphs" textLength="362" x="714.5" y="62.7686">(C4 Container diagram)</text><!--MD5=[84dda40acb3410cad7262261daba2aaf]
cluster c1--><rect fill="#FFFFFF" height="903" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="568" x="912" y="76.8438"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="221" x="1085.5" y="93.6953">Station data processing</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="1164" y="108.6074">[System]</text><!--MD5=[a79645e74fdddf168a098e501fbfe8e0]
cluster c2--><rect fill="#FFFFFF" height="603" style="stroke: #444444; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;" width="252" x="359" y="95.3438"/><text fill="#444444" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="411.5" y="112.1953">Web application</text><text fill="#444444" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="453" y="127.1074">[System]</text><!--MD5=[f637b4c150ddfe5a23ebefab20f72a7f]
entity producerApplication--><rect fill="#438DD5" height="165.7813" style="stroke: #3C7FC0; stroke-width: 1.5;" width="220" x="1219" y="153.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="1233.5" y="178.1953">Producer Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="127" x="1265.5" y="193.1074">[Java, Unirest, Kafka]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1331" y="208.9326"/><image height="48" width="48" x="1305" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="212.2344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="1238" y="273.2295">Fetch stations data from</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="1229" y="289.5264">Paris' API and push them to</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="1308.5" y="305.8232">Kafka</text><!--MD5=[ce6a85ca25b6f16f50738b34c4d69d9c]
entity streamingApplication--><rect fill="#438DD5" height="217" style="stroke: #3C7FC0; stroke-width: 1.5;" width="220" x="946" y="127.8438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="1006" y="152.6953">Streaming</text><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="102" x="1005" y="171.3203">Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="143" x="984.5" y="186.2324">[Java, Kafka Streaming]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1058" y="202.0576"/><image height="48" width="48" x="1032" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="205.3594"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="197" x="957.5" y="266.3545">Combine and process Paris'</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="982" y="282.6514">data. Detect locked</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="138" x="985" y="298.9482">stations using their</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="956" y="315.2451">expected activity based on</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="102" x="1005" y="331.542">past statistics</text><!--MD5=[0b77ce7009a41ff29b6146aac87f819c]
entity statisticsDb--><path d="M928,521.8438 C928,511.8438 1031,511.8438 1031,511.8438 C1031,511.8438 1134,511.8438 1134,521.8438 L1134,676.625 C1134,686.625 1031,686.625 1031,686.625 C1031,686.625 928,686.625 928,676.625 L928,521.8438 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M928,521.8438 C928,531.8438 1031,531.8438 1031,531.8438 C1031,531.8438 1134,531.8438 1134,521.8438 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="182" x="940" y="550.6953">Statistics Database</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="79" x="991.5" y="565.6074">[PostgreSQL]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1033" y="581.4326"/><image height="48" width="48" x="1007" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAADA0lEQVR4Xu2XT2oVQRDGc7c+QC7gAbyAB/AAunIl7ly4cJmdK3EnuHEhEkEISCAgKEZQBGH88T7SVOpP9zwdnoIpPob3eqqrvq6qru45avfe/FM4ikN/FzeEZvifCB0/eHv78fu7Jx/uPzu/8/Ts1qN3USdiQghzJ68/nV58E16dfX3y8iODOJMCnlA4//xj2cnl95/owAAFXvVxCX+Z3uemKAlhDuvWnBW8ogMV/8IIvtF5+OLCjWMW49GjkBMi1M6KFSyyyuenX/yLIAQVTQLmXywLg9FvSQhD3oARbKU+UoE91ZPqs+zoOiE0Dg/CogfZjMLyMBsjqpzOCcWsW8EKFeBHZ6JadoOUYPSeEGKym2lF28qPrhAC7yyvjdDYX5tVWCWYdUEiFdH7foQoHRR4oqN2x3PMD01iQ12r/djiW1vUgxpSeWIaB6iJVqtjhg7KqNG3NNcSiq5zQjRiY/OapPtFh4Md6QIbqOi3ottf0bWj65wQq+/TnKjRuUElxQ1Kmgmem5tusZxQM+twomWtGZSwth4h4mp5V6dHTqhbceLC3qVdL44uNpuWkOykyAlVdV0FoxWEdAbrlU1Z2oGEnFBVEzhIK6x7jYK++qFdTLrhhZxQKxyk9ZtWepfeD3u6FbYKJaF4Fi4FIQIQB60oSJ1QVc5CSShtLbG5LSYplRASNSQ9oy+LklCVBYJhS15uzPtcdHSwyOnNuiTUiqwpSD0kKy9rmjVOljAiVN17dH5pxTyrHuGEnhRdRIwIAffZsGQtX+mImlZEfZqvNiXkgkQSU4Vp4trV2sgdRvQ5dZx9D00INXOMqA4sKHDtOF2MLAMr2vC6rgCoDEI1J9R2Jcyy+oK0z3WMX159ZA0IxZUMsIpQBJzgQYQ6ywGhae+x+E1CEQNCcR8McAhC6WW+wiEIrexAwiEIDS4bEZsRGnwaROUBNiNU3UAGt9UUmxFq2dV22XPPt20JpbeDvQqobUvIHbH8XnPfcNiSUNtxorrB4LQaY2NCf44bQjPcEJrhF3jtvoec/65YAAAAAElFTkSuQmCC" y="584.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="162" x="948" y="645.7295">Store the hourly usage</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="182" x="938" y="662.0264">statistics and daily traffic</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="942" y="678.3232">statistics of each station</text><!--MD5=[a8d0812f293a6a5b0e62bae90d7913fb]
entity kafkaCluster--><path d="M1169,513.8438 C1169,503.8438 1278,503.8438 1278,503.8438 C1278,503.8438 1387,503.8438 1387,513.8438 L1387,684.9219 C1387,694.9219 1278,694.9219 1278,694.9219 C1278,694.9219 1169,694.9219 1169,684.9219 L1169,513.8438 " fill="#438DD5" style="stroke: #3C7FC0; stroke-width: 1.5;"/><path d="M1169,513.8438 C1169,523.8438 1278,523.8438 1278,523.8438 C1278,523.8438 1387,523.8438 1387,513.8438 " fill="none" style="stroke: #3C7FC0; stroke-width: 1.5;"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="1216" y="542.6953">Kafka Cluster</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="153" x="1201.5" y="557.6074">[Kafka, Schema Registry]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1280" y="573.4326"/><image height="48" width="48" x="1254" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC0ElEQVR4Xu2YQYrVQBCG5259AC/gAbyAB/AAunIl7ly4cDk7V+JOcONCZARhQAYGBEUFRRDiRwp+yurKS3XmvZknWPyE9zqd1Jfq6upOTtr9t0elk77pZvWPA907/Xh2+WOa7eLLr6evPvV9rqgBoNM3nw3FG3y3Hr7rO29WFejRy0tBEBvFCXt9/r3vv1lVILl/8PzCWu48+fDt529rvPvsvL9km0pA+EuDAZy17zGZSkBLjgVKevVXbVMJ6OgihJQu9Ryikc4ch6ZhFYgKZL4xOISCvTj7Gjr7KWlWD2EVCHHT4Gaa61DolparqZxnA0BtHibiYQ6oRkQidPCBJOF4Bo5q4Wx/z6AxIHT78Xu7e5o3KpieVbnfh7PXnoHsFBbalXP9JUEHAcJ9aD8IEChKIDOGIKRFWgjIPGsk7frbBlWBlAe9WbUE16+401yxrBSJsjL5S0B+7qQWUFKrZHSrAFFn/X2JBw8NYlqWmFz091PdjJZivV4H8mVX64aJYdJw8IO/OkXeQEwx5Jim/5LWgfS4acx9bhVjsFvrQEwN85fWfs2gaaEQjGqfQPzuO4xqHcgvXv1Zn2HXNGQ+S0IhCeXAR4hTPAlpxzFMhd1aB2qu/k5zahMVFKq2GcRgaZRltPg5uEMlIG1hlyyFC8ZTVca0BNRmJh8nb7bTwJnHojOjRlQ4KmB7WzpMuOSOWiVwyd8wEIL2+aQNQjotggaATLp7mqpiDe0H2X6YdgPJcUgXa7wBIK0zPl20DFe+AowB+U0+weiZ/Hwk2yjufmdSWVsGgPq3rSn7HJN2m2pTrNWBQlH2JaB/UaSz75DGcklVIDnQ+40fnXRZJdvoUyzQUglIvsOWSKNTHI6KSkAar+BYoOnOZJtKQHJ8LJ9j/D5fL2J+Q115aS+qBNT+/vRBJvnqku61N6sK1Ba+s/R16IoaAGrH9uH8evQfaE1/AEAlGEQzMetqAAAAAElFTkSuQmCC" y="576.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="194" x="1179" y="637.7295">Store the incoming station</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="1189" y="654.0264">and traffic data, and the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="177" x="1187.5" y="670.3232">processed station status</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="1230" y="686.6201">and statistics</text><!--MD5=[9bfd0a87d2b9a6cda5f475705ea2bffd]
entity sinkApplication--><rect fill="#438DD5" height="165.7813" style="stroke: #3C7FC0; stroke-width: 1.5;" width="202" x="1032" y="797.8438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1063.5" y="822.6953">SinkApplication</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="76" x="1095" y="837.6074">[Java, Kafka]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1135" y="853.4326"/><image height="48" width="48" x="1109" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAAC40lEQVR4Xu2XTWpUURCFs7e3ADfgAtyAC3ABceRInDlw4DAzR+JMcOJAJIIQkEAgkGCEBEG4fvShi/JW9/19YA/6cmi669336ryqU1W3T5bTLweFk2j6vzgSquFIqIb1Cb35eB2N7ViZ0ONX386v7qO9HSsTOvt8c/fwJ9rbsSahZ2c/UkqHEiGxYT1/dxmvtmMdQghZbC5vf8erXZgl9OjFV3IkNqwnr7/LSJw+XfzikiztmCKEMyRsbJ6+vaDK4KGfCDzeUsU4IdwblbSJjckoTShpkBCRcGQSP81CzPgeb2nEICHSYWykErMQubi/HYOEqCa5t0Fh0o6buzBIyNxbdszSW1YZBgmZfo3Qyw9Xsrw//xn3t2OQEFDB+2qyFjAjo3FCakJ+lFojmAnSOKFly4lkmUVKmpmvU4SW7QHIlKTinzmjdRBSLyYe+CM7DCy7ZKKhHcSJgc4wcldLATYR4lkmWPThqXhA18tZ7ZvNfFoNVvXeREjPskWOoMVLZ8DIZLWeyTZPXUcUNsTnezQRItQ2w8uLQMJDOc0eQuLSWoQMvLFkxCcOBHzr4BH3exC/1KD3PkIKuy+rDDCGXDx72Fmgqus+Qv44hlaI/071pE1qTECQ0KWYx4g+QvjQHx1zHJcqn5zqFr6wH8u+2szQR0gg/moqmZJ25jHrWFV0E7KBpVJSs+GLxK5ijL2xHXVC8qcYLP+eFQvLUtaLEiHNKTng1QmJygdn/IxKwoKdOO3MUdYn96FESJ0j7Z/eGguaD/Gqh/pFbAcRJUL2fzRtZLFTs1WQaL0Y8as2oaVMaHEHUy1Kmqcrd2rQpmuAP6mNDbyA/0frR3K57iqElu244Im+77UsSQp+5l5trFyDdUIePNHaD2FQJAT9JKIEgD1ZDDCqPKvS7iOEp0IP9FCzgKIdEwjwrKj3AWcECWfkkTf2wGucd4StRc7CCKEMKn7TuCk97mzBCoTWxZFQDQdH6C/5dU+AwCXG/gAAAABJRU5ErkJggg==" y="856.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="1042" y="917.7295">Consume statistics topic</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="150" x="1056" y="934.0264">and store data in the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="136" x="1065" y="950.3232">statistics database</text><!--MD5=[ff3eef49b9d9c410aa00500b6a6853a9]
entity htmlApplication--><rect fill="#438DD5" height="165.7813" style="stroke: #3C7FC0; stroke-width: 1.5;" width="216" x="375" y="516.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="158" x="404" y="541.1953">HTML Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="189" x="388.5" y="556.1074">[Javascript, HTML, OpenLayers]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="485" y="571.9326"/><image height="48" width="48" x="459" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAABJklEQVR4Xu2YMQrCQBBFc7ccwAt4AC/gATyAVlbBzsLCMp2VpBNsLEQiCAEJBATFCIog6OBC1JnIrAvZNTCfV4Tshn0MySRZz+8u/wqPnnKLCHF8CDUH6yDKwsXeGr1J+lWoE27vLpIerlCIEqH8csNzbWUaH7EQOKqxeXKCYzu0hhu1KNQCC7XHiRobzXbFmAVEiEOEOESIQ4Q4RIhDhDhEiEOEOGooBJ+wcGwNXshJRIhLHYSKXyQnKRFq9Fd4lsXE2RkLAfDA44m2EkRZiRAUCf778dzqg1rxS0gBNxNtX5Sc25mAZehVFKgCEsBCmuD1SYxfQSZCmjtJ9EIdTIQ0bzWzIv0spN+x3ruLPj8L+c8GAYux0P1DHUyEKkWEOESIQ4Q4HtznNYLAerwUAAAAAElFTkSuQmCC" y="575.2344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="173" x="394.5" y="636.2295">Display a map with each</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="385" y="652.5264">station status and the user'</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="448.5" y="668.8232">s location</text><!--MD5=[898148df37845fdf682dee619cdbf4ac]
entity webApplication--><rect fill="#438DD5" height="179.75" style="stroke: #3C7FC0; stroke-width: 1.5;" width="220" x="375" y="146.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="148" x="411" y="171.1953">Web Application</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="146" x="410" y="186.1074">[SpringBoot, Thymeleaf,</text><text fill="#FFFFFF" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="119" x="425.5" y="200.0762">embedded Tomcat]</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="487" y="215.9014"/><image height="48" width="48" x="461" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACsElEQVR4Xu2YQWpUQRCG525zgFzAA3iBHMADxJUrcefChcvsspLsBDdZiCQgBEIgEIioYAgEnl+mkrLyd73unvElEXnFv5jp16/r76q/qntmsdz5/E9hUQ49LWZCLcyEWvivCW2/Py4H63j25khGJiO09erLMAyHZ7+ev/1aPk2xe3DBK7KNyQi92D0Z7uzl3mk5IQL2p9+u0smTEXr38dwJYZU4RTYYL8ankxGy+Lt9Ov5JzF7vnzHuwDfgUZzJeFznoQj1G7KL60xG6MPhd3XVZ+sRIt+ogUKgPlEfucdxWt6SiH7rJYQC8MFsS78EgK9wjfM3Thle2oSMhLiMpYHxNU5Av/Fpv7VFTWqkFA24j1XDtEiIzKqrPmPN6CUhJEnth7rqs0anRjppeMZgYbNuu1mhiTCUEKunRVSCaV5ZPy6vl6uT8r6vtrEHWVYJEZ4mISaQVlnapCAHSNNKX0qIdcmaDDqIQUnFzYIvxVixVKxKiGIZ01Bz99ZR2LQ+GLH0UqCEllmVEZjOfZuPnp5UejEkhETX+NDFqmaXwGbFlXdFQ0LIlrMPPXsVo+JMTJUUV2SaEzJsfDyRXwtAuh9pzYJRQhuzMSNOxkkKsxIbQ06oEu21zOsIUSKDyr3WkRBaV8V1oxeM6TeFEiq7CILw6zAfcMAIGZFpdSNrdolYL2VyGJVXIgEpMDeV9l1aeVxE3CPk67okHX6OEp50l1BnnD30BK8ipj+EopDTF7zuxpqswyTsq6U2FqdbQvG+V+kTrnc4gfJmHWFXpcqZk4r9llAUQcXHckU9+kgPSEG8OUXznh5xQyj2U5yVK04CdpI2W2hB1zO42Fr9a+HW1MdfgjSltIa7H/kLmxFRrjI5iEJ6GBAnbYyPCWKBWqzlGhh5SkIpZkItzIRamAm18BsVDjl5CwZjBgAAAABJRU5ErkJggg==" y="219.2031"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="180" x="393" y="280.1982">Generate and deliver the</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="196" x="385" y="296.4951">main page with the current</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="432" y="312.792">stations status</text><!--MD5=[8fc3522a43f8c7199df5e09e5bb0188e]
entity user--><rect fill="#08427B" height="151.8125" style="stroke: #073B6F; stroke-width: 1.5;" width="202" x="7" y="160.3438"/><image height="48" width="48" x="84" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAIAAADYYG7QAAACD0lEQVR4Xu2YoU4EMRCGT+4j8Ai8AhaH4QHgAUjQuFMECUgMIUgwJAgMhgQsAYUiJCiQIBBY+EITsjfTdme6V24v4c8vyGbb+ZjOtN0bNcvjQXmkH83WvYBWto6PLm6v7p7uH1/w2fXD+PBycX1Pv2l3IdDm/vn7x+dXQiAubRzoURa7gRZWd0iGRIiJbOnhnfYBQZNJjNbuyY2eJG8fkDE3bbG4ep6MHUAsgYxmE3nVs6VsBWJSGccsOlFPmLIViMzLOB7pCVO2AtHJMohH7Fh6zqitQK7m0rJvAVYgGcEpe//PLdDz65sM4pF9N7ICcXDKIB5Nv6j7tD0NoSdM2QrU9Gg0ewE1LqBhHR3BBdvj2vapnidjHxD/q6vd7Pvhr31AwcY8eXMTXAKECZZJFXuEq27aLgQK5uLMohCenGGuGewOxSjBvYBqeG6B+Nqiblggdjnc+ZXDy+FNFpFzw76O3UBAROuXh6FoiAcf5g9eTvUgzy0nWg6I8cXHRUpg5bOVBCo+KDpFajOf23GgPme7RSQ+lacIENUgJ6gg1k6HjgOlqnLqip4tEuhv0hNEMXUD0clyXE3p6pZA0S2nnvTlXwLJEZWlb7cTQH1+USgTN4VhAenm/wea1OCAOmqo6fE1WCb9WSKBah+rbUWPWAmE2Rvk0ApiB45eOyNAzU8xcTvj8KvkKEoOaIYeHNA3ZuygAvFMUO0AAAAASUVORK5CYII=" y="170.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="87.5" y="233.1953">User</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="110" y="249.9639"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="178" x="17" y="266.2607">Someone wanting to get</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="141" x="35.5" y="282.5576">the updated Velib's</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="106" x="55" y="298.8545">stations status</text><!--MD5=[b0576eac782cb758ab86e0657124dadc]
entity parisAPI--><rect fill="#999999" height="87.5156" style="stroke: #8A8A8A; stroke-width: 1.5;" width="198" x="1600" y="192.3438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="178" x="1610" y="217.1953">Paris OpenData API</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1701" y="233.9639"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="1625" y="250.2607">Expose stations and</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="1649.5" y="266.5576">counters data</text><!--MD5=[a70bea36bce5a8ae57acf2595addf1ec]
entity openLayers--><rect fill="#999999" height="87.5156" style="stroke: #8A8A8A; stroke-width: 1.5;" width="198" x="384" y="836.8438"/><text fill="#FFFFFF" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="429.5" y="861.6953">OpenLayers</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="485" y="878.4639"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="174" x="394" y="894.7607">Provide OpenStreetMap</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="467" y="911.0576">data</text><!--MD5=[5fd4610e0cb4b2c69d18798c14e4ec84]
link user to webApplication--><path d="M209.029,236.3438 C257.578,236.3438 316.075,236.3438 366.693,236.3438 " fill="none" id="user-to-webApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="374.746,236.3438,366.746,233.3438,366.746,239.3438,374.746,236.3438" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="125" x="227.5" y="202.4824">1.Connect to web</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="59" x="262.5" y="216.4512">address</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="272" y="230.4199">[HTTP]</text><!--MD5=[86127d1be7a3ed1dd562c40a736f9109]
link user to htmlApplication--><path d="M158.385,312.4317 C193.521,361.6078 243.383,425.4838 296,473.8438 C317.879,493.9528 343.299,513.1198 368.214,530.1248 " fill="none" id="user-to-htmlApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="374.878,534.6318,369.9315,527.6653,366.5705,532.6355,374.878,534.6318" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="297" y="414.9824">2.View stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="48" x="330" y="428.9512">status</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="334" y="442.9199">[HTTP]</text><!--MD5=[961580127f5ee6eead62d50a05dd91b4]
link webApplication to htmlApplication--><path d="M440.577,326.6268 C434.54,342.3457 429.294,358.8138 426,374.8438 C417.144,417.9428 416.627,430.8538 426,473.8438 C428.534,485.4658 432.255,497.3018 436.603,508.8228 " fill="none" id="webApplication-to-htmlApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="439.544,516.3438,439.424,507.8006,433.8362,509.986,439.544,516.3438" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="140" x="427" y="414.9824">Delivers generated</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="36" x="481" y="428.9512">page</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="479" y="442.9199">[HTTP]</text><!--MD5=[f85ebf61c77ca7ee4365d73ff476d0ab]
link htmlApplication to openLayers--><path d="M483,682.6908 C483,729.8438 483,787.5498 483,828.3138 " fill="none" id="htmlApplication-to-openLayers" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="483,836.4878,486,828.4878,480,828.4878,483,836.4878" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="89" x="484.5" y="736.9824">Get the map</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="484" y="750.9512">backgrounds</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="511" y="764.9199">[HTTP]</text><!--MD5=[310111efa78a4865b7f8d67257a85765]
link webApplication to kafkaCluster--><path d="M595.069,281.5598 C642.575,304.4158 696.429,335.7838 737,374.8438 C773.9,410.3688 752.571,446.6867 796,473.8438 C863.126,515.8198 1076.96,475.8058 1151,503.8438 C1154.59,505.2018 1158.16,506.6928 1161.71,508.2978 " fill="none" id="webApplication-to-kafkaCluster" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1168.96,511.7468,1163.0288,505.5969,1160.4475,511.0132,1168.96,511.7468" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="820.5" y="414.9824">Consume the</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="141" x="797" y="428.9512">processed stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="852.5" y="442.9199">data</text><!--MD5=[e8c715c276da95fd3bccf5d5cf341c49]
link webApplication to statisticsDb--><path d="M548.343,326.4988 C558.254,342.2318 567.886,358.7378 576,374.8438 C597.066,416.6558 577.917,441.7447 612,473.8438 C695.471,552.4558 826.372,581.6418 919.637,592.3608 " fill="none" id="webApplication-to-statisticsDb" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="927.694,593.2518,920.0725,589.39,919.4125,595.3535,927.694,593.2518" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="613" y="421.9824">Fetch statistics</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="655.5" y="435.9512">data</text><!--MD5=[9c5b72b7ada8061a12d79de0d9737477]
link producerApplication to kafkaCluster--><path d="M1317.36,319.7118 C1309.99,371.8758 1300.41,439.7497 1292.54,495.4478 " fill="none" id="producerApplication-to-kafkaCluster" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1291.39,503.5738,1295.48,496.0723,1289.5391,495.2326,1291.39,503.5738" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="129" x="1310" y="421.9824">Push the stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1317.5" y="435.9512">and traffic data</text><!--MD5=[b456962fc3931798020d88f07273dc02]
link streamingApplication to kafkaCluster--><path d="M1091.93,344.8448 C1112.09,404.4748 1133.99,467.8468 1138,473.8438 C1145.4,484.9228 1154.02,495.6438 1163.27,505.8378 " fill="none" id="streamingApplication-to-kafkaCluster" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1168.79,511.7778,1165.5408,503.8757,1161.1461,507.9606,1168.79,511.7778" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="1167" y="386.9824">Process the</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="119" x="1151" y="400.9512">stations data to</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="126" x="1147.5" y="414.9199">detect anomalies</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="1139" y="428.8887">and the traffic data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1149.5" y="442.8574">to compute each</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="1156.5" y="456.8262">station nearby</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="49" x="1188" y="470.7949">traffic</text><!--MD5=[7bd216ec852f030baa0346f289e3cbff]
reverse link kafkaCluster to sinkApplication--><path d="M1246.11,702.7998 C1237.79,724.7928 1228.01,747.5178 1217,767.8438 C1211.62,777.7818 1205.42,787.8048 1198.88,797.5538 " fill="none" id="kafkaCluster-backto-sinkApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1249,695.0568,1243.3968,701.5069,1249.0196,703.6007,1249,695.0568" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="139" x="1236" y="743.9824">Consume statistics</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="45" x="1285" y="757.9512">topics</text><!--MD5=[397004573508e02ddf2c4e80a3f23f62]
reverse link statisticsDb to sinkApplication--><path d="M1065.47,694.8018 C1077.63,728.1298 1091.2,765.3118 1102.97,797.5518 " fill="none" id="statisticsDb-backto-sinkApplication" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1062.57,686.8648,1062.495,695.4084,1068.1312,693.3511,1062.57,686.8648" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="1093" y="743.9824">Write statistics</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="1135" y="757.9512">data</text><!--MD5=[15f73685de288abf99a87ef780eff8de]
link streamingApplication to statisticsDb--><path d="M972.331,344.8978 C967.419,354.6658 963.189,364.7068 960,374.8438 C946.797,416.8167 948.725,431.3128 960,473.8438 C962.693,484.0018 966.43,494.1968 970.793,504.1398 " fill="none" id="streamingApplication-to-statisticsDb" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="974.244,511.6898,973.6467,503.1667,968.1897,505.661,974.244,511.6898" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="967.5" y="407.9824">Fetch the usage</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="981.5" y="421.9512">statistics to</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="131" x="961" y="435.9199">compute station's</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="965" y="449.8887">expected activity</text><!--MD5=[4f70df459808d8bd90864d99d5807d40]
link producerApplication to parisAPI--><path d="M1439.01,236.3438 C1487.24,236.3438 1543.65,236.3438 1591.58,236.3438 " fill="none" id="producerApplication-to-parisAPI" style="stroke: #666666; stroke-width: 1.0;"/><polygon fill="#666666" points="1599.81,236.3438,1591.81,233.3438,1591.81,239.3438,1599.81,236.3438" style="stroke: #666666; stroke-width: 1.0;"/><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="1457.5" y="202.4824">Get the stations</text><text fill="#666666" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="1460.5" y="216.4512">and traffic data</text><text fill="#666666" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="41" x="1499" y="230.4199">[REST]</text><rect fill="#FFFFFF" height="111.7813" rx="5" ry="5" style="stroke: #FFFFFF; stroke-width: 1.0;" width="136" x="1646" y="992.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="1652" y="1012.8389">Legend</text><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="0" x="1713" y="1012.8389"/><rect fill="#08427B" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="1652" y="1016.1406"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="1656" y="1029.1357">person</text><rect fill="#1168BD" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="1652" y="1032.4375"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="52" x="1656" y="1045.4326">system</text><rect fill="#438DD5" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="1652" y="1048.7344"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="69" x="1656" y="1061.7295">container</text><rect fill="#686868" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="1652" y="1065.0313"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="114" x="1656" y="1078.0264">external person</text><rect fill="#999999" height="16.2969" style="stroke: none; stroke-width: 1.0;" width="124" x="1652" y="1081.3281"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="1656" y="1094.3232">external system</text><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="999.8438" y2="999.8438"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1016.1406" y2="1016.1406"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1032.4375" y2="1032.4375"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1048.7344" y2="1048.7344"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1065.0313" y2="1065.0313"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1081.3281" y2="1081.3281"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1776" y1="1097.625" y2="1097.625"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1652" x2="1652" y1="999.8438" y2="1097.625"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="1776" x2="1776" y1="999.8438" y2="1097.625"/><!--MD5=[7ac65eae3f6b636b487c0204a036c9ff]
@startuml
!include https://raw.githubusercontent.com/adrianvlupu/C4-PlantUML/latest/C4_Container.puml
!define SPRITESURL https://raw.githubusercontent.com/rabelenda/cicon-plantuml-sprites/v1.0/sprites
!includeurl SPRITESURL/kafka.puml
!includeurl SPRITESURL/java.puml
!includeurl SPRITESURL/postgresql.puml
!includeurl SPRITESURL/tomcat.puml
!includeurl SPRITESURL/desktop.puml

skinparam TitleFontSize 30
LAYOUT_WITH_LEGEND()

title
<b>Architecture</b>
(C4 Container diagram)
end title
  
System_Boundary(c1, "Station data processing") {
    Container(producerApplication, "Producer Application", "Java, Unirest, Kafka", "<$java>\n Fetch stations data from Paris' API and push them to Kafka")
    Container(streamingApplication, "Streaming Application", "Java, Kafka Streaming", "<$java>\n Combine and process Paris' data. Detect locked stations using their expected activity based on past statistics") 
    ContainerDb(statisticsDb, "Statistics Database", "PostgreSQL", "<$postgresql>\n Store the hourly usage statistics and daily traffic statistics of each station")
    ContainerDb(kafkaCluster, "Kafka Cluster", "Kafka, Schema Registry", "<$kafka>\n Store the incoming station and traffic data, and the processed station status and statistics")
    Container(sinkApplication, "SinkApplication", "Java, Kafka", "<$java>\n Consume statistics topic and store data in the statistics database") 
}

System_Boundary(c2, "Web application") {
    Container(htmlApplication, "HTML Application", "Javascript, HTML, OpenLayers", "<$desktop>\n Display a map with each station status and the user's location")
    Container(webApplication, "Web Application", "SpringBoot, Thymeleaf, embedded Tomcat", "<$tomcat>\n Generate and deliver the main page with the current stations status")
}

Person(user, User, "Someone wanting to get the updated Velib's stations status")
System_Ext(parisAPI, "Paris OpenData API", "Expose stations and counters data")
System_Ext(openLayers, "OpenLayers", "Provide OpenStreetMap data")

Rel_R(user, webApplication, "1.Connect to web address", "HTTP")
Rel_R(user, htmlApplication, "2.View stations status", "HTTP")

Rel(webApplication, htmlApplication, "Delivers generated page", "HTTP")
Rel(htmlApplication, openLayers, "Get the map backgrounds", "HTTP")

Rel(webApplication, kafkaCluster, "Consume the processed stations data")
Rel(webApplication, statisticsDb, "Fetch statistics data")

Rel(producerApplication, kafkaCluster, "Push the stations and traffic data")
Rel(streamingApplication, kafkaCluster, "Process the stations data to detect anomalies and the traffic data to compute each station nearby traffic")
Rel_Up(sinkApplication, kafkaCluster, "Consume statistics topics")
Rel_Up(sinkApplication, statisticsDb, "Write statistics data")
Rel(streamingApplication, statisticsDb, "Fetch the usage statistics to compute station's expected activity")
Rel_R(producerApplication, parisAPI, "Get the stations and traffic data", "REST")
@enduml

@startuml





skinparam defaultTextAlignment center

skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam LegendBorderColor transparent
skinparam LegendBackgroundColor transparent
skinparam LegendFontColor #FFFFFF

skinparam rectangle {
    StereotypeFontSize 12
    shadowing false
}

skinparam database {
    StereotypeFontSize 12
    shadowing false
}

skinparam Arrow {
    Color #666666
    FontColor #666666
    FontSize 12
}

skinparam rectangle<<boundary>> {
    Shadowing false
    StereotypeFontSize 0
    FontColor #444444
    BorderColor #444444
    BorderStyle dashed
}





























skinparam rectangle<<person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #08427B
    BorderColor #073B6F
}

skinparam rectangle<<external_person>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #686868
    BorderColor #8A8A8A
}

skinparam rectangle<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam rectangle<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

skinparam database<<system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #1168BD
    BorderColor #3C7FC0
}

skinparam database<<external_system>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #999999
    BorderColor #8A8A8A
}

sprite $person [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
0000000000000000000049BCCA7200000000000000000000
0000000000000000006EFFFFFFFFB3000000000000000000
00000000000000001CFFFFFFFFFFFF700000000000000000
0000000000000001EFFFFFFFFFFFFFF80000000000000000
000000000000000CFFFFFFFFFFFFFFFF6000000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
00000000000001FFFFFFFFFFFFFFFFFFF900000000000000
00000000000006FFFFFFFFFFFFFFFFFFFF00000000000000
0000000000000BFFFFFFFFFFFFFFFFFFFF40000000000000
0000000000000EFFFFFFFFFFFFFFFFFFFF70000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000FFFFFFFFFFFFFFFFFFFFF80000000000000
0000000000000DFFFFFFFFFFFFFFFFFFFF60000000000000
0000000000000AFFFFFFFFFFFFFFFFFFFF40000000000000
00000000000006FFFFFFFFFFFFFFFFFFFE00000000000000
00000000000000EFFFFFFFFFFFFFFFFFF800000000000000
000000000000007FFFFFFFFFFFFFFFFFF100000000000000
000000000000000BFFFFFFFFFFFFFFFF5000000000000000
0000000000000001DFFFFFFFFFFFFFF70000000000000000
00000000000000000BFFFFFFFFFFFF500000000000000000
0000000000000000005DFFFFFFFFA1000000000000000000
0000000000000000000037ABB96100000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000025788300000000005886410000000000000
000000000007DFFFFFFD9643347BFFFFFFFB400000000000
0000000004EFFFFFFFFFFFFFFFFFFFFFFFFFFB1000000000
000000007FFFFFFFFFFFFFFFFFFFFFFFFFFFFFD200000000
00000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE10000000
0000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB0000000
000000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5000000
000003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD000000
000009FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF200000
00000DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF600000
00000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF800000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFB00000
00001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA00000
00000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF700000
000006FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE100000
0000008FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD3000000
000000014555555555555555555555555555555300000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}


















skinparam rectangle<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}

skinparam database<<container>> {
    StereotypeFontColor #FFFFFF
    FontColor #FFFFFF
    BackgroundColor #438DD5
    BorderColor #3C7FC0
}








sprite $kafka [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
0000000000000005CFFD8000000000000000000000000000
000000000000009FFFFFFC10000000000000000000000000
00000000000007FFFDCFFFB0000000000000000000000000
0000000000000FFF6003EFF4000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000006FF800004FF9000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000000EFF6003EFF4000000464100000000000000
00000000000005FFFEEFFFA000007FFFFF80000000000000
000000000000008FFFFFFC000009FFFFFFF9000000000000
0000000000000003AFFD7000005FFFB8BFFF500000000000
00000000000000002FF4000000CFF70006FFC00000000000
00000000000000002FF4000000FFF00000EFF00000000000
00000000000000002FF4000000FFE00000EFF00000000000
000000000000002AFFFFC50000EFF40003FFD00000000000
00000000000006FFFFFFFFB02CFFFF646EFF800000000000
0000000000005FFFFFFFFFFCFFFFFFFFFFFC000000000000
000000000001FFFFB658FFFFFF71BFFFFFB1000000000000
000000000007FFF600002EFFE20003898400000000000000
00000000000BFFC0000006FFF10000000000000000000000
00000000000DFF90000003FFF40000000000000000000000
00000000000DFF90000003FFF30000000000000000000000
00000000000AFFD0000007FFF10000000000000000000000
000000000006FFF800005FFFF30005ACA600000000000000
000000000000EFFFC77AFFFFFF83DFFFFFD2000000000000
0000000000004FFFFFFFFFFAFFFFFFFFFFFE100000000000
00000000000004EFFFFFFF701AFFFE525DFF800000000000
0000000000000018CFFE820000EFF30002FFD00000000000
00000000000000002FF6000000FFE00000EFF00000000000
00000000000000002FF6000000EFF10000FFF00000000000
00000000000000002FF6000000BFF80008FFB00000000000
0000000000000003AFFE6000004FFFC9CFFF400000000000
000000000000007FFFFFFC100007FFFFFFF8000000000000
00000000000005FFFFEFFFA000005EFFFE60000000000000
0000000000000EFF7004FFF3000000242000000000000000
0000000000004FFC00007FF8000000000000000000000000
0000000000005FF800004FF9000000000000000000000000
0000000000004FFB00006FF8000000000000000000000000
0000000000001FFF5002EFF5000000000000000000000000
00000000000008FFFCCFFFC0000000000000000000000000
000000000000009FFFFFFC10000000000000000000000000
0000000000000005CFFD8000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $java [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000800000000000000000000
000000000000000000000000002C00000000000000000000
000000000000000000000000009E00000000000000000000
00000000000000000000000005FC00000000000000000000
0000000000000000000000005FF600000000000000000000
000000000000000000000008FFD000000000000000000000
0000000000000000000001CFFF3016BC3000000000000000
000000000000000000003EFFF42BFF900000000000000000
00000000000000000004FFFF35FFF6000000000000000000
0000000000000000002FFFF22FFE20000000000000000000
0000000000000000009FFF309FF400000000000000000000
000000000000000000DFF800CFF000000000000000000000
000000000000000000CFF200CFF300000000000000000000
0000000000000000005FF2007FFA00000000000000000000
0000000000000000000EF6000EFF40000000000000000000
00000000000000000003EE0004FFA0000000000000000000
000000000000000000003E7000CFC0000000000000000000
0000000000000000000002C2009F80000000000000000000
00000000000000357841000400D900000698300000000000
0000000000008EFFA100000005400022127FF40000000000
000000000000FFFFFCA999999ABDFFC10008FB0000000000
0000000000003BFFFFFFFFFFFFEC84000006FB0000000000
00000000000000015756664420000000000AF80000000000
0000000000000008FC20000000146000002FF30000000000
000000000000000EFFFDB99ABDFFFB1003DF400000000000
00000000000000019EFFFFFFFFFD95005E91000000000000
000000000000000002835666420000004100000000000000
00000000000000004FF8422457BF90000000000000000000
00000000000246409FFFFFFFFFFFF5000000000000000000
0000000002CFFB8605BEFFFFFEB71000000C100000000000
000000000AFFC0000000122100000000008F600000000000
0000000008FFF92000000000000000004AFE300000000000
00000000007FFFFDA8644422234689CFFFA1004100000000
0000000000015ADFFFFFFFFFFFFFFFEB6100199000000000
000000000000000135688999887431000049FC1000000000
00000000000000036420000000000248BFFD600000000000
00000000000000000258ACCCCCDEFFFDB730000000000000
000000000000000000000012444442000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $postgresql [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000135642000000000000
000000000059CCCB8510049DFFEB614DFFFFD81000000000
000000004EFFFFFFFFB09FFFFFFFFF807FFFFFE400000000
00000003FFFFFFFFFE1AFFFFFFFFFFFC16FFFFFF60000000
0000000CFFFFFFFFF66FFFFFFFFFFFFFE26FFFFFF3000000
0000003FFFFFFFFFF1EFFFFFFFFFFFFFFC0AFFFFF8000000
0000007FFFFFFFFF84FFFFFFFFFFFFFFFF81FFFFF9000000
0000008FFFFFFFFF49FFFFFFFFFFFFFFFFF38FFFF8000000
0000009FFFFFFFFF0CFFFFFFFFFFFFFFFFF91FFFF7000000
0000009FFFFFFFFE0E9646CFFFFFFFFF93210EFFF3000000
0000007FFFFFFFFC0127960CFFFFFFF719BC0EFFF0000000
0000005FFFFFFFFC0AFFFF56FFFFFFF1BFFE0FFFD0000000
0000002FFFFFFFFC1FFFFF93FFFFFFF0CFFC1FFF90000000
0000000FFFFFFFFD0FFFFFD0FFFFFFF2BFFA3FFF40000000
0000000BFFFFFFFE0FFFFFF0EFFFFFF56FFA3FFE00000000
00000007FFFFFFFD0FFFFFF0EFFFFFFB0EFC1FF800000000
00000003FFFFFFFB2FFFFFF0EFFFFFFF28FD0FF300000000
00000000EFFFFFF93FFFFFC1FFFFFFFF91FE0FB000000000
00000000AFFFFFF93FFFFF83FFFFFFFFF28E0F4000000000
000000006FFFFFFC0EFFFF28FFFFFFFFFB1B1B0000000000
000000001FFFFFFF37FFFB1FFFFFFFFFFF21620000000000
000000000AFFFFFFC08FF66FFFFFFFFFFFC0400000000000
0000000004FFFFFFF601617FFFFFFFFFFFF5000000000000
0000000000DFFFFF90000021DFFFFFFFFF61200000000000
00000000004FFFFA000004F66FFFFFFFFF0DFCAB81000000
00000000000BFFC000003EF46FFFFFFFFE07998200000000
0000000000008A10028CFE406FFFFFFFFC00000000000000
0000000000000000002431006FFFFFFFFB00000000000000
0000000000000000000000006FFFFFFFF900000000000000
0000000000000000000000006FFFFFFFF700000000000000
0000000000000000000000006FFFFFFFF500000000000000
0000000000000000000000006FFFFFFFF300000000000000
0000000000000000000000005FFFFFFFF000000000000000
0000000000000000000000003FFFFFFFE000000000000000
0000000000000000000000000FFFFFFFB000000000000000
0000000000000000000000000AFFFFFF3000000000000000
00000000000000000000000001DFFFD40000000000000000
000000000000000000000000001552000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $tomcat [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000040000000000000000200000
0000000000000000000000001FC300000000000009F40000
0000000000000000000000005FFF600000000001DFF60000
0000000000000000000000008FFFF3000000001DFFF80000
0000000000000000000000009FFFFB57999988BFFFF90000
0000000000000000000000009FFFFFFFFFFFFFFFFFFC0000
000000000000000000000000AFFFFFFFFFFFFFFFFFFC0000
000000000013426DA4000000BFFFFFFFFFFFFFFFFFFC0000
000000005BC99AFFFFA100009FFFFFFFFFFFFFFFFFFB0000
00000009910000DFFFFD10007FFFFFFFFFFFFFFFFFF90000
0000006800000017999610003FFFFFFFFFFFFFFFFFF70000
000000C000000000000000000FFFFFFFFFFFFFFFFFF40000
0000058000000000000001760AFFFFFFFFFFFFFFFFF10000
00000740000000000004BFFE02FFFFFFFFFFFFFFFFA00000
000008400000000004CFFFFF708FFFFFFFFFFFFFFF400000
0000075000000002CFFFFFFFF10DFFFFFFFFFFFFFC000000
000003800000008FFFFFFFFFFB04FFFFFFFFFFFFF6000000
000000C000002DFFFFFFFFFFFF607FFFFFFFFFFFC0000000
000000740006FFFFFFFFFFFFFFF20AFFFFFFFFFF20000000
0000000A007FFFFFFFFFFFFFFFFE108FFFFFFFF500000000
0000000009FFFFFFFFFFFFFFFFFFD207FFFFFF7000000000
000000009FFFFFFFFFFFFFFFFFFFFE202CFFF50000000000
00000008FFFFFFFFFFFFFFFFFFFFFFF6004A300000000000
0000006FFFFFFFFFFFFFFFFFFFFFFFFFB200000000000000
000004FFFFFD9889BDEFFFFFFFFFFFFFFFC6850000000000
00002FFFF91000000000368CFFFFFFFFFFFFFF4000000000
0000CFFE20000BFFD5000000159EFFFFFFFFFFF300000000
0008FFF30000009FFC00000000004AFFFFFFFFFF40000000
003FFF7000000006FFCCA10000000017DFFFFFFFF2000000
00CFFF10000000003DFFF6000000000004BFFFFFFE100000
07FFFD0000000000000000000000000000039FFFFFFEB400
1FFFFC000000000000000000000000000000029FFFFFFF80
29999900000000000000000000000000000000018FFFFFF4
000000000000000000000000000000000000000002788882
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}
sprite $desktop [48x48/16] {
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000027999999999999999999999999999999999999600000
0005FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFD2000
000EFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA000
002FFB222222222222222222222222222222222223FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FF8000000000000000000000000000000000000FFE000
004FFB444444444444444444444444444444444444FFE000
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000
004FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000
003FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFE000
001FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC000
000BFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7000
0001DFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF80000
000003444444444444EFFFFFFFFFF8444444444444100000
000000000000000000FFFFFFFFFFF8000000000000000000
000000000000000005FFFFFFFFFFFF000000000000000000
00000000000000000DFFFFFFFFFFFF800000000000000000
00000000000000003FFFFFFFFFFFFFE00000000000000000
00000000000000000BEEEEEEEEEEEE600000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
000000000000000000000000000000000000000000000000
}

skinparam TitleFontSize 30
hide stereotype
legend right
|<color:#000000>**Legend**</color> |
|<#08427B> person |
|<#1168BD> system |
|<#438DD5> container |
|<#686868> external person |
|<#999999> external system |
endlegend

title
<b>Architecture</b>
(C4 Container diagram)
end title
  
rectangle "==Station data processing\n<size:12>[System]</size>" <<boundary>> as c1 {
    rectangle "==Producer Application\n//<size:12>[Java, Unirest, Kafka]</size>//\n\n <$java>\n Fetch stations data from Paris' API and push them to Kafka" <<container>> as producerApplication
    rectangle "==Streaming Application\n//<size:12>[Java, Kafka Streaming]</size>//\n\n <$java>\n Combine and process Paris' data. Detect locked stations using their expected activity based on past statistics" <<container>> as streamingApplication 
    database "==Statistics Database\n//<size:12>[PostgreSQL]</size>//\n\n <$postgresql>\n Store the hourly usage statistics and daily traffic statistics of each station" <<container>> as statisticsDb
    database "==Kafka Cluster\n//<size:12>[Kafka, Schema Registry]</size>//\n\n <$kafka>\n Store the incoming station and traffic data, and the processed station status and statistics" <<container>> as kafkaCluster
    rectangle "==SinkApplication\n//<size:12>[Java, Kafka]</size>//\n\n <$java>\n Consume statistics topic and store data in the statistics database" <<container>> as sinkApplication 
}

rectangle "==Web application\n<size:12>[System]</size>" <<boundary>> as c2 {
    rectangle "==HTML Application\n//<size:12>[Javascript, HTML, OpenLayers]</size>//\n\n <$desktop>\n Display a map with each station status and the user's location" <<container>> as htmlApplication
    rectangle "==Web Application\n//<size:12>[SpringBoot, Thymeleaf, embedded Tomcat]</size>//\n\n <$tomcat>\n Generate and deliver the main page with the current stations status" <<container>> as webApplication
}

rectangle "<$person>\n==User\n\n Someone wanting to get the updated Velib's stations status" <<person>> as user
rectangle "==Paris OpenData API\n\n Expose stations and counters data" <<external_system>> as parisAPI
rectangle "==OpenLayers\n\n Provide OpenStreetMap data" <<external_system>> as openLayers

user -RIGHT->> webApplication : **1.Connect to web address**\n//<size:12>[HTTP]</size>//
user -RIGHT->> htmlApplication : **2.View stations status**\n//<size:12>[HTTP]</size>//

webApplication - ->> htmlApplication : **Delivers generated page**\n//<size:12>[HTTP]</size>//
htmlApplication - ->> openLayers : **Get the map backgrounds**\n//<size:12>[HTTP]</size>//

webApplication - ->> kafkaCluster : **Consume the processed stations data**
webApplication - ->> statisticsDb : **Fetch statistics data**

producerApplication - ->> kafkaCluster : **Push the stations and traffic data**
streamingApplication - ->> kafkaCluster : **Process the stations data to detect anomalies and the traffic data to compute each station nearby traffic**
sinkApplication -UP->> kafkaCluster : **Consume statistics topics**
sinkApplication -UP->> statisticsDb : **Write statistics data**
streamingApplication - ->> statisticsDb : **Fetch the usage statistics to compute station's expected activity**
producerApplication -RIGHT->> parisAPI : **Get the stations and traffic data**\n//<size:12>[REST]</size>//
@enduml

PlantUML version 1.2020.17beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>